(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),l=t(14),o=t(2),i=function(e){var n=e.message;return r.a.createElement("h2",null,n)},s=function(e){var n=e.message,t=e.onChangeHandler,a=e.inputValue;return r.a.createElement("div",null,n," ",r.a.createElement("input",{onChange:t,value:a}))},m=t(3),f=t.n(m),d="/api/persons",h=function(){return f.a.get(d).then((function(e){return e.data}))},b=function(e){return f.a.post(d,e).then((function(e){return e.data}))},E=function(e){return f.a.delete(d+"/".concat(e)).then((function(e){return e.data}))},g=function(e,n){return f.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.message,t=e.success,a=e.callback;return t?(a(),r.a.createElement("div",null,r.a.createElement("h1",{className:"success"},n))):(a(),r.a.createElement("div",null,r.a.createElement("h1",{className:"error"},n)))},v=(t(37),function(e){var n=e.name,t=e.number,a=e.deleteHandler,c=e.id;return r.a.createElement("div",null,n," ",t,r.a.createElement("button",{onClick:function(){return a(c)}},"delete"))}),k=function(e){var n=e.entries,t=e.regVal,a=e.onClickDeleteHandler,c=new RegExp(t,"i"),u=n.filter((function(e){return c.test(e.name)})).map((function(e){return r.a.createElement(v,{key:e.id,name:e.name,number:e.number,deleteHandler:a,id:e.id})}));return r.a.createElement("div",null,u)},w=function(){var e=Object(a.useState)(""),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),f=m[0],d=m[1],v=Object(a.useState)(""),w=Object(o.a)(v,2),j=w[0],C=w[1],H=Object(a.useState)([]),O=Object(o.a)(H,2),V=O[0],D=O[1],y=Object(a.useState)(""),S=Object(o.a)(y,2),T=S[0],N=S[1],x=function e(n){window.confirm("Do you really wish to delete ths number?")&&E(n).then((function(){c(""),d(""),h().then((function(n){D(r.a.createElement(k,{entries:n,regVal:j,onClickDeleteHandler:e}))}))}))};return Object(a.useEffect)((function(){h().then((function(e){return D(r.a.createElement(k,{entries:e,regVal:j,onClickDeleteHandler:x}))}))}),[]),r.a.createElement("div",null,r.a.createElement(i,{message:"Phonebook"}),T,r.a.createElement(s,{message:"filter shown with: ",onChangeHandler:function(e){var n=e.target.value;h().then((function(e){C(n),D(r.a.createElement(k,{entries:e,regVal:n,onClickDeleteHandler:x}))}))},inputValue:j}),r.a.createElement(i,{message:"add a new"}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h().then((function(e){var n=Object(l.a)(e);if(n.some((function(e){return e.name===t}))){if(window.confirm("".concat(t," is already added to the phonebook, replace the old number with the new one?"))){var a=n.find((function(e){return e.name===t})).id,u={name:t,number:f};g(a,u).then((function(){h().then((function(e){c(""),d(""),D(r.a.createElement(k,{entries:e,regVal:j,onClickDeleteHandler:x}))}))})).catch((function(e){e?(console.log(e.response.data.error),N(r.a.createElement(p,{message:e.response.data.error,success:!1,callback:function(){return setTimeout((function(){return N("")}),5e3)}}))):N(r.a.createElement(p,{message:"The information of ".concat(u.name," has already been removed from the server "),success:!1,callback:function(){return setTimeout((function(){return N("")}),5e3)}}))}))}}else b({name:t,number:f}).then((function(e){c(""),d(""),N(r.a.createElement(p,{message:"added ".concat(e.name),success:!0,callback:function(){return setTimeout((function(){return N("")}),5e3)}})),D(r.a.createElement(k,{entries:n.concat(e),regVal:j,onClickDeleteHandler:x}))})).catch((function(e){console.log(e.response.data.error),N(r.a.createElement(p,{message:e.response.data.error,success:!1,callback:function(){return setTimeout((function(){return N("")}),5e3)}}))}))}))}},r.a.createElement(s,{message:"name: ",onChangeHandler:function(e){return c(e.target.value)},inputValue:t}),r.a.createElement(s,{value:"number: ",onChangeHandler:function(e){return d(e.target.value)},inputValue:f}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))),r.a.createElement(i,{message:"Numbers"}),V)};u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a7134885.chunk.js.map